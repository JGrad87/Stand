Система управления стендом на полигоне.
Система управления позволяет контролировать и управлять состояние игольчатого крана а также аварийного клапана сброса. Также система отображает вспомогательные параметры стенда (давление нагнетания, давление подпора, расход РЖ, суммарный объем и температура рабочей жидкости)
Прототип главного экрана отображен ниже.  Экран для отображения имеет разрешение 1024х768. Можно делать под него, но желательно сделать резиновый интерфейс, который сможет адекватно отобразиться и на других разрешениях (возможно использовать доп темный фон по краям, если будут проблемы с непропорциональным  растягиванием)
Приложение нужно делать в QT (мы используем QT Creator)

Верхняя зона:
- кнопки быстрого перехода по страницам (пока одна Стенд, можно еще добавить закладку Сводка)
- Восклицательный знак – сигнализирует о появлении и текущем состоянии ошибок. Если ошибок нет, треугольник и восклицательный знак серого цвета. Если появляется ошибка то восклицательный знак начинает мигать с частотой 1 Гц (500мс – серый, 500мс оранжевый). Если ошибки заквитированы (оператор зашел на страницу ошибок или нажал кнопку ок в нижней зоны ), то сигнал не мигает, а просто светит оранжевым цветом. 
- Запись и индикаторная лампочка горит зеленым цветом когда идет запись данных, в данном делаем что по включению сразу горит.
- Текущее время и дата
- Меню - Кнопка для перехода на страницу МЕНЮ
Главный индикатор  - Давление нагнетания
Главный индикатор отображает давление нагнетания как стрелкой по шкале, так и по центру в цифровом значении.
Шкала строиться по умолчанию от 0 до Pпр (По умолчанию Pпр= 1000 бар,  предусмотреть возможность настройки другого диапазона и другие еденицы в настройках канала)
В нижней части экрана находиться поле ввода максимального допустимого для данной операции давления нагнетания. От его значения меняется цвет шкалы и цветовая сигнализация цифрового отображения давления.
Цветовое обозначение области отображения давления нагнетания на дисплее.
P, Бар
P<(Pз- Δ)	(Pз-Δ)≤P<Pз	P≥ Pз
 	 	 
 Где Pз- предельное давление нагнетание заданное оператором в пределах от 0 до Pпр Бар, Δ=0.2* Pз если Δ<100 Бар и Δ=100 Бар если Δ≥100 Бар. 
 Игольчатый кран. 
Зона управления игольчатым кранам состоит из:
- Поле ввода требуемого положения заслонки. (Задается в процентах, диапазон ввода 0-100%)
- Текущее положение заслонки
- Индикатор состояния крана, зеленая – открыта (значение текущее больше 0), красное закрыто – текущее положение <=0.
- строка управления дискретными приращениями. В поле задается значение одного шага в %, и кнопки + и – для активации шаг + или шаг -. 
- кнопки Открыть и Закрыть. При нажатии кнопки кран полностью открывается или полностью закрывается. Если нажали на кнопку открытия или закрытия и идет процесс открытия или закрытия и приходит другая команда (+ или – или задание конкретного положения) то система начинает отрабатывать новый запрос игнорируя старый (то же самое и наоборот – прошу % и нажал закрыть).
Зона отображения расхода.
- Показывает текущий расход 
Зона отображения Суммарного объема
- Отображает суммарный объем прокаченной жидкости   
- Кнопка сброс (серая кнопка) – посылает команду на сброс счетчика суммарного расхода.
Зона управления аварийного клапана сброса
- Кнопка Сброс – открывает аварийный клапан и посылает команду на открытие игольчатого крана
- Кнопка Закрыть – закрывает игольчатый кран ?????
- Индикатор отображает состояние клапан сброса. Зеленый открыт, красный закрыт.
Зона Температура РЖ. 
- отображает текущую температуру рабочей жидкости. 
Зона отображения давления подпора.
- Отображает текущее давление подпора. 
Цветовое обозначение значений подпора:
P, Бар
P<0.5	3≤P≤6	P>6
 	 	 


Ввод значений в поля ввода происходит с всплывающего калькулятора (после нажатия поля ввода). Для прототипа см. картинку ниже 

При нажатии кнопки Меню происходит переход на страницу Меню

На экране меню есть следующие закладки:
- Установки, Состояние, Пользователи, Файл, Пользователи, О программе – пока ничего не делаем
- Главное – возвращает систему на главную страницу
- Сводка Отображает. Для примера см. картинку ниже, только отобразить наши текущие параметры (Давление нагнетания, давление подпора, температура РЖ, расход суммарный расход, положение игольчатого крана, состояние крана сброса (открыт/закрыт))

-Настройка происходит настройка каналов подключенных датчиков. Сначала отображается список всех каналов (для примера см. ниже только сделать каналы от стенды как было описано для Сводки)

А при нажатии канала или кнопки настроить появляется окно для выбора единиц и знаков после запятой.

Возможные единицы измерения для физических величин:
- Давление – бар, Мпа, пси
-Температура- цельсий, фаренгейт
-Расход – л/мин, м3/час
При смене единиц измерения на данном канале происходит пересчет текущих единиц, заданного значения, шкалы индикатора (для давления нагнетания) и цветовых зон.
-Сообщения
На экране сообщения пока генерируем одно сообщение. Когда эмуляторная часть выдает флаг сообщения 1 , система отображает текст -  “Время события. Давление нагнетания выше допустимого”. А на главном экране начинает мигать треугольник. Для образца экрана сообщений см ниже

- Сервисы. На данном экране происходит настройка сервисных служб которые работают на установке. Можно пока оставить или как бонус задание дополнительно сделать работу с MQTT. 

Организовать MQTT брокер на компьютере.  Все данные которые мы получаем завести в этот сервер данных. Чтобы можно было к нему подключиться клиентом. Например этим https://mqtt-explorer.com/ 
Подключившись к нему по его адрессу в клиенте мы сможем видеть данные см. ниже. 


Также если мы развернем приложения без эмулятора на другом компьютере мы сможем подключиться к нашей системе управления и по MQTT проводить мониторинг и управление с стороннего ПК
- Экран. 
-Дата и время
 
Вся работа с конечными датчиками происходит через контроллер. Работа приложения с контроллером будет происходить по CAN шине. Для данного задания пока не нужно разбираться с протоколом обмена CAN, можно просто сделать эмулятор работы контроллера, через какой то внутренний протокол обмена.
Эмулятор контроллера.
- Давление нагнетания – давление нагнетания меняется по циклу от 0 до Рз+10 бар, а затем от Рз +10 бар до 0. При превышение давления > Рз, генерируется сообщение 1. 
- Управление игольчатым краном – Полный цикл открытия закрытия 30 секунд. По старту кран закрыт, требуемое положение = 0. При задании значения в %, текущее положение начнет изменять в соответствии со скоростью его работы. То есть если я прошу 50% он изменит текущее значение от 0 до 50% за 15 секунд. Остальные задатчики также работают в соответствии со скоростью работы крана.
- Расход циклично меняем от 0 до 500л/мин со скоростью 1 л/мин
- Суммарный объем – если получиться суммируем текущее значение суммарного расхода. При нажатии кнопки Сброс, суммарный расход сбрасывается и начинает счет заново.
- Клапан сброса – время исполнения из открытого в закрытое и наоборот 1 сек. При нажатии кнопки Сброс – клапан открывется за 1 сек и после этого зажигается индикатор зеленого цвета, и наоборот по команде закрыть за 1 секунду закрывает и затем индикатор зеленого цвета. 
-Температура РЖ циклично меняем от -20 до +20 со скоростью 1 градус в минуту
- Давление подпора циклично меняем от 0 и до 7 бар со скоростью 0.1 бар в секунду. 

MQTT логика 
Манометр: везде QoS 1
для публикации:
manometr/settings содержит единицы измерения + предельное значение + время
manometr/status содержит строка ("normal", "warning", "danger")+ время
manometr/error содержит ошибки (например с датчика) + время
manometer/pressure/current - текущее давление + предельное давление + время

для подписки 
manometr/set/limit — установка нового pLimit (значение float)
manometr/get/pressure - получение текущего давления
